(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{M3fW:function(e,t,n){"use strict";n.r(t),n.d(t,"AlertConditionTokenMapType",(function(){return r})),n.d(t,"getAlertConditionTokenMap",(function(){return u}));var r,o=n("mrSG"),i=(n("HbRj"),n("YFKU")),a=n("Eyy1");!function(e){e[e.MainSeries=0]="MainSeries",e[e.Study=1]="Study",e[e.PineScript=2]="PineScript",e[e.Strategy=3]="Strategy"}(r||(r={}));var l=Object(i.t)("Upper Bound: {alertChannelUpperBoundaryTitle}, Lower Bound: {alertChannelLowerBoundaryTitle}"),s=function(e){return Object(i.t)("in {count} bar",{plural:"in {count} bars",count:e}).format({count:e.toString()})};function u(e){var t=Object(a.ensureNotNull)(e.get("extra")),n=t.getAlertSeries();if("StudyStrategy"===n.type())return{type:r.Strategy,strategyTitle:n.title()};var i=t.conditionData();if(["pine_script","pine_alertcondition_plot"].includes(i.type))return{type:r.PineScript,conditionTitle:i.title,conditionMessage:i.message};var u=e.getFormatter();function c(e){var t=e.getPlots();return e.title({formatter:u,withPlotTitle:t&&t.length>1})}var d="";switch(i.type){case"moving":var p=t.movingValue(),f=t.movingPeriod();d=i.percents?p+"% "+s(f):(u?u.format(p):p)+" "+s(f);break;case"comparison":if(i.isChannel){var g=c(t.getUpperBand()),y=c(t.getLowerBand());d="("+l.format({alertChannelUpperBoundaryTitle:g,alertChannelLowerBoundaryTitle:y})+")"}else d=c(t.getBand())}var m=t.getMainSeries(),h=m?m.title({withInterval:!e.get("crossInterval")}):e.shortSymbol(),b=i.descriptionTitle||i.title;return Object(o.__assign)({conditionTitle:b,conditionOptions:d},"MainSeries"===n.type()?{type:r.MainSeries,alertSeries:h}:{type:r.Study,alertSeries:n.title(),mainSeries:h})}},YG2F:function(e,t,n){"use strict";n.r(t),n.d(t,"getAlertDefaultDescription",(function(){return l}));n("HbRj");var r=n("YFKU"),o=n("M3fW"),i=Object(r.t)("{alertSeries} {alertCondition} {alertConditionOptions} on {chartSeries}"),a=Object(r.t)("{strategyName}: order {{strategy.order.action}} @ {{strategy.order.contracts}} filled on {{ticker}}. New strategy position is {{strategy.position_size}}");function l(e){switch(e.type){case o.AlertConditionTokenMapType.MainSeries:return e.alertSeries+" "+e.conditionTitle+" "+e.conditionOptions;case o.AlertConditionTokenMapType.Study:return i.format({alertSeries:e.alertSeries,chartSeries:e.mainSeries,alertCondition:e.conditionTitle,alertConditionOptions:e.conditionOptions});case o.AlertConditionTokenMapType.PineScript:return e.conditionMessage;case o.AlertConditionTokenMapType.Strategy:return a.format({strategyName:e.strategyTitle})}}},"hp/T":function(e,t,n){"use strict";n.r(t),n.d(t,"DEFAULT_SOUNDS",(function(){return s})),n.d(t,"availableSounds",(function(){return u})),n.d(t,"play",(function(){return d})),n.d(t,"stop",(function(){return p})),n.d(t,"onStopped",(function(){return f})),n.d(t,"isPlaying",(function(){return g})),n.d(t,"enableAlertSoundsForMobile",(function(){return y})),n.d(t,"enableForMobile",(function(){return m}));n("YFKU")
;var r=n("qFKp"),o=n("uOxu"),i=n("hY0g"),a=n.n(i),l=Object(o.getLogger)("Lib.Sound",{color:"#dea433"}),s={sound:"notification/notification",alert:"alert/fired"},u=[{title:window.t("Alarm Clock"),path:"alert/alarm_clock",soundForAlerts:!0}];u.unshift({path:s.sound,title:window.t("Default"),common:!0},{title:window.t("Chat Message"),path:"chat/message",common:!0},{title:window.t("Chat Popup"),path:"chat/popup",common:!0},{title:window.t("Chat Call"),path:"chat/call"},{title:window.t("Chat Calling"),path:"chat/calling"},{title:window.t("Chat Hangup"),path:"chat/hangup"},{title:window.t("Thin"),path:"alert/fired",soundForAlerts:!0},{title:window.t("3 Notes Reverb"),path:"alert/3_notes_reverb",soundForAlerts:!0}),u.push({title:window.t("Beep-beep"),path:"alert/beep_beep",soundForAlerts:!0},{title:window.t("Calling"),path:"alert/calling",soundForAlerts:!0},{title:window.t("Chirpy"),path:"alert/chirpy",soundForAlerts:!0},{title:window.t("Fault"),path:"alert/fault",soundForAlerts:!0},{title:window.t("Hand Bell"),path:"alert/hand_bell",soundForAlerts:!0});var c={};function d(e,t){return void 0===e&&(e=s.sound),Object(r.isOnMobileAppPage)("any")?Promise.resolve():(l.logNormal('Sound play attempt for "'+e+'" duration-'+t+"s;"),h(e).play(t))}function p(e){if(!Object(r.isOnMobileAppPage)("any")){var t=[];e?t.push(h(e)):t=Object.values(c),t.forEach((function(e){e.stop()}))}}function f(e,t){Object(r.isOnMobileAppPage)("any")||h(e).playing.subscribe((function(e){e||t()}),{once:!0})}function g(e){return!Object(r.isOnMobileAppPage)("any")&&h(e).playing.value()}function y(){m(u.filter((function(e){return!!e.soundForAlerts})).map((function(e){return e.path})))}function m(e){if(!Object(r.isOnMobileAppPage)("any")&&(e&&/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(window.navigator.userAgent)))if(Array.isArray(e)||(e=[e]),0!==(e=e.filter((function(e){var t=h(e);return!(!t||!t.el.load||t._mobilePreloadActive)&&(t._mobilePreloadActive=!0,!0)}))).length){var t=function(){var r=[];Array.isArray(e)&&e.forEach((function(e){var t=h(e);t.el.load();var n=t.play().catch((function(e){if("AbortError"!==e.name)throw l.logError('enableForMobile for "'+t.el.src+'" preload error: - '+e.message),e}));t.el.pause(),r.push(n)})),Promise.all(r).then((function(){l.logNormal("enableForMobile sounds initialized")})),n.forEach((function(e){document.removeEventListener(e,t,!0)}))},n=["click","touchend","keydown"];n.forEach((function(e){document.addEventListener(e,t,!0)}))}else l.logNormal("enableForMobile no sounds passed")}var h=function(e){if(e in c)return c[e];l.logNormal("requested sound  "+e+" not cached, building a new audio element");var t=Object(r.wrapUrl)("/static/sounds/"+e+".mp3"),n=new Audio(t),o={el:n,playing:new a.a(!1),play:function(t){return void 0===t&&(t=0),o.playing.value()?(l.logNormal("sound already playing"),Promise.reject("already playing")):(o.playing.setValue(!0),new Promise((function(n,r){var i=t>0,a=function(){(function(e){try{
l.logNormal('"'+e.el.src+'" triggering html5 play method, readyState - '+e.el.readyState+"; muted - "+e.el.muted+"; volume - "+e.el.volume+"; currentTime - "+e.el.currentTime);var t=e.el.play();return t||(t=Promise.resolve()),t}catch(n){return l.logError('play method for "'+e.el.src+'" catch error - '+n.message),Promise.reject(n)}})(o).catch((function(t){l.logNormal('stop counting sound "'+e+'"; as playing due to an error: '+t.message),o.stop(),r(t)}))};o._onEnded=function(){i?a():(o.stop(),n())},o.el.addEventListener("ended",o._onEnded),i&&setTimeout((function(){l.logNormal('"'+e+'" repeat timeout - '+t+"s off"),i=!1}),1e3*t),a()})))},stop:function(){o.el.pause(),o.playing.setValue(!1),o._onEnded&&o.el.removeEventListener("ended",o._onEnded)}};c[e]=o;return["canplaythrough","error"].forEach((function(t){n.addEventListener(t,(function(){l.logNormal('for sound "'+e+'", event - '+t+" is fired")}),!1)})),l.logNormal("canPlayType - "+n.canPlayType("audio/mp3")),c[e]};m(u.filter((function(e){return!!e.common})).map((function(e){return e.path})))}}]);