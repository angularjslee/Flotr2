(window.webpackJsonp=window.webpackJsonp||[]).push([["study-pane-views"],{"0HiO":function(t,e,i){"use strict";i.r(e),i.d(e,"TrendChannelPaneView",(function(){return h}));var r=i("Eyy1"),n=i("aO4+"),a=i("hBTJ"),o=i("VdBB"),s=i("Zy3/"),l=i("8Uy/"),d=i("BCbF"),h=function(){function t(t,e,i){this._data=[],this._invalidated=!0,this._provider=t,this._model=e,this._data=[],this._hitTestResult=void 0!==i?new o.HitTestResult(o.HitTestResult.CUSTOM,i):new o.HitTestResult(o.HitTestResult.REGULAR)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new s.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e],n=new d.PolygonRenderer(this._hitTestResult);n.setData(r),t.append(n)}return t},t.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var a=this._provider.graphics().trendchannels();if(0!==a.size){var o=this._model.timeScale().visibleBarsStrictRange();if(null!==o){var s=this._provider.firstValue();if(null!==s){var d=o.firstBar(),h=o.lastBar();a.forEach((function(a,o){var u=t._provider.properties().graphics.trendchannels[o];a.forEach((function(a){var o=a.startIndex,p=a.endIndex;if(!(Math.max(o,p)<d&&!a.extendRight||Math.min(o,p)>h&&!a.extendLeft)){var f=e.priceToCoordinate(Object(r.ensureDefined)(a.startHighPrice),s),v=e.priceToCoordinate(Object(r.ensureDefined)(a.startLowPrice),s),_=e.priceToCoordinate(Object(r.ensureDefined)(a.endHighPrice),s),y=_-(f-v),w=i.indexToCoordinate(o),g=i.indexToCoordinate(p),x=c(new n.Point(w,f),new n.Point(g,_),i.width(),e.height(),a.extendLeft,a.extendRight),T=x[0],m=x[1],b=c(new n.Point(w,v),new n.Point(g,y),i.width(),e.height(),a.extendLeft,a.extendRight),R=b[0],S=b[1];t._data.push({points:[T,R,S,m],color:u.color.value(),backcolor:u.color.value(),linewidth:void 0!==u.borderWidth?u.borderWidth.value():0,linestyle:l.LINESTYLE_SOLID,filled:!0,fillBackground:!0,transparency:a.transparency?Math.min(a.transparency+u.transparency.value(),100):u.transparency.value(),mouseTouchable:!0})}}))}))}}}}},t}();function c(t,e,i,r,o,s){if(Object(n.equalPoints)(t,e))return[t,e];var l=new n.Point(0,0),d=new n.Point(i,r);if(o){var h=t.subtract(e);(c=Object(a.intersectRayAndBox)(t,t.add(h),Object(n.box)(l,d)))?t=c:e=new n.Point(i,e.y)}if(s){h=e.subtract(t);var c=Object(a.intersectRayAndBox)(e,e.add(h),Object(n.box)(l,d));e=c||new n.Point(i,e.y)}return[t,e]}},"1sos":function(t,e,i){"use strict";i.r(e),i.d(e,"HorizLinePaneView",(function(){return s}));var r=i("Eyy1"),n=i("VdBB"),a=i("Zy3/"),o=i("l4sv"),s=function(){function t(t,e,i){this._data=[],this._invalidated=!0,this._provider=t,this._model=e,this._hitTestResult=void 0!==i?new n.HitTestResult(n.HitTestResult.CUSTOM,i):new n.HitTestResult(n.HitTestResult.REGULAR)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1)
;for(var t=new a.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e],n=new o.HorizontalLineRenderer;n.setData(r),n.setHitTest(this._hitTestResult),t.append(n)}return t},t.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var n=this._provider.graphics().horizlines();if(0!==n.size){var a=this._model.timeScale().visibleBarsStrictRange();if(null!==a){var o=this._provider.firstValue();if(null!==o){var s=a.firstBar(),l=a.lastBar();n.forEach((function(n,a){var d=t._provider.properties().graphics.horizlines[a];d.visible.value()&&n.forEach((function(n){var a=n.startIndex,h=n.endIndex;!n.extendRight&&Math.max(a,h)<s||!n.extendLeft&&Math.min(a,h)>l||t._data.push({y:e.priceToCoordinate(Object(r.ensureDefined)(n.level),o),left:n.extendLeft?void 0:i.indexToCoordinate(a),right:n.extendRight?void 0:i.indexToCoordinate(h),color:d.color.value(),linewidth:d.width.value(),linestyle:d.style.value()})}))}))}}}}},t}()},"292E":function(t,e,i){"use strict";i.r(e);var r=i("mrSG"),n=i("Eyy1"),a=i("aO4+"),o=i("972a"),s=i("nInm"),l=i("Zy3/"),d=i("f6yo"),h=i("VdBB"),c=i("ikwP"),u=i("Ialn"),p=function(){function t(t,e){this._data=t,this._textCache=e}return t.prototype.draw=function(t,e){var i=this;if(this._data){var r=f(this._data.direction),n=this._data.point.x;"left"===this._data.halign?n-=this._data.size:"right"===this._data.halign&&(n+=this._data.size);var a=this._data.point.y;t.font=this._fontStyle();var o=t.measureText(this._data.text).width;this._textCache.textWidth=o;var s=this._data.fontSize;t.textAlign=Object(u.isRtl)()?"right":"left";var l=Object(c.calcTextHorizontalShift)(t,o),d=.65*s,h=1*s;Object(c.drawScaled)(t,e.pixelRatio,(function(){t.translate(n,a),t.beginPath(),t.moveTo(0,0),t.lineTo(d,h*r),t.lineTo(.5*o+d,h*r),t.lineTo(.5*o+d,(h+1.75*s)*r),t.lineTo(.5*-o-d,(h+1.75*s)*r),t.lineTo(.5*-o-d,h*r),t.lineTo(-d,h*r),t.lineTo(0,0),t.strokeStyle=i._data.borderColor,t.stroke(),t.fillStyle=i._data.color,t.fill(),t.fillStyle=i._data.fontColor,t.fillText(i._data.text,.5*-o+l,r<0?r*h-.5*s:h+1.25*s)}))}},t.prototype.hitTest=function(t){var e=this._textCache.textWidth||0,i=this._data.fontSize,r=f(this._data.direction),n=.65*i,o=1*i,s=this._data.point.x;"left"===this._data.halign?s-=this._data.size:"right"===this._data.halign&&(s+=this._data.size);var l=this._data.point.y,c=s-.5*e-n,u=s+.5*e+n,p=l+o*r,v=l+(o+1.75*i)*r;if(v<p){var _=p;p=v,v=_}if(Object(d.pointInBox)(t,Object(a.box)(new a.Point(c,p),new a.Point(u,v))))return new h.HitTestResult(h.HitTestResult.REGULAR);var y=[new a.Point(this._data.point.x,this._data.point.y),new a.Point(this._data.point.x+.65*i,this._data.point.y+i*r),new a.Point(this._data.point.x-.65*i,this._data.point.y+i*r)],w=(t.x-y[0].x)*(y[1].y-y[0].y)-(t.y-y[0].y)*(y[1].x-y[0].x);return((t.x-y[1].x)*(y[2].y-y[1].y)-(t.y-y[1].y)*(y[2].x-y[1].x))*w>0&&((t.x-y[2].x)*(y[0].y-y[2].y)-(t.y-y[2].y)*(y[0].x-y[2].x))*w>0?new h.HitTestResult(h.HitTestResult.REGULAR):null},t.prototype._fontStyle=function(){
return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},t}();function f(t){if("up"===t)return 1;if("down"===t)return-1;throw new Error(t+" is not supported by TriangleTextMarkRenderer")}var v=function(){function t(t,e){this._data=t,this._textCache=e}return t.prototype.draw=function(t,e){var i=this,r=this._data.point.x,n=this._data.point.y;t.font=this._fontStyle();var a=t.measureText(this._data.text).width;this._textCache.textWidth=a,Object(c.drawScaled)(t,e.pixelRatio,(function(){switch(t.translate(r,n),t.beginPath(),t.moveTo(0,0),t.textAlign=i._data.halign,i._data.valign){case"middle":t.textBaseline="middle";break;case"top":t.textBaseline="bottom";break;case"bottom":t.textBaseline="hanging"}t.fillStyle=i._data.fontColor,t.fillText(i._data.text,0,0)}))},t.prototype.hitTest=function(t){var e=this._data.point.x,i=this._data.point.y,r=this._textCache.textWidth||0,n=this._data.fontSize;switch(this._data.halign){case"right":e-=r;break;case"center":e-=r/2}switch(this._data.valign){case"middle":i-=n/2;break;case"bottom":i-=n}var o=new a.Point(e,i),s=new a.Point(e+r,i+n);return Object(d.pointInBox)(t,Object(a.box)(o,s))?new h.HitTestResult(h.HitTestResult.REGULAR):null},t.prototype._fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._data.fontSize+"px "+this._data.font},t}(),_=i("tSCe"),y=i.n(_),w=i("Tmoa");i.d(e,"TextMarkPaneView",(function(){return g}));var g=function(t){function e(e,i,r){var n=t.call(this)||this;return n._data=[],n._textCache=[],n._invalidated=!0,n._provider=e,n._model=i,n._data=[],n._textCache=[],n}return Object(r.__extends)(e,t),e.prototype.update=function(){this._invalidated=!0},e.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new l.CompositeRenderer,e=0;e<this._data.length;e++){var i=this._data[e],r=this._textCache[e];switch(i.shape){case"triangle":t.append(new p(i,r));break;case"rectangle":t.append(new v(i,r))}}return t},e.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var n=this._provider.graphics().textmarks();if(0!==n.size){var o=this._model.timeScale().visibleBarsStrictRange();if(null!==o){var l=this._provider.firstValue();if(null!==l){var d=o.firstBar(),h=o.lastBar();n.forEach((function(n,o){var c=t._provider.properties().graphics.textmarks[o];c.visible.value()&&n.forEach((function(n){var o=n.time;if(!(o<d||h<o)&&null!==t._provider.series().bars().valueAt(o)){o=n.time+(n.offset||0);var u={text:n.text?n.text:"",bold:c.fontBold.value(),italic:c.fontItalic.value(),font:c.fontFamily.value(),fontColor:Object(w.generateColor)(c.fontColor.value(),c.transparency.value()),fontSize:c.fontSize.value()},p=c.location.value(),f=c.shape.value();switch(f){case s.a.Triangle:var v=t._calcCoordsForTriangleShape(p,o,50,n.price,l,e,i),_=v.x,y=v.y,g=v.direction;t._data.push(Object(r.__assign)({shape:f,
color:Object(w.generateColor)(c.color.value(),c.transparency.value()),borderColor:"rgb(0, 0, 0)",direction:g,point:new a.Point(_,y),halign:c.halign.value(),size:.5*i.barSpacing()},u));break;case s.a.Rectangle:var x=t._calcCoordsForRectangleShape(p,o,n.price,l,e,i);_=x.x,y=x.y;t._data.push(Object(r.__assign)({shape:f,point:new a.Point(_,y),halign:c.halign.value(),valign:void 0!==c.valign?c.valign.value():"middle"},u))}t._textCache.push({})}}))}))}}}}},e.prototype._calcCoordsForTriangleShape=function(t,e,i,r,a,s,l){var d=Math.round(l.indexToCoordinate(e));switch(t){case o.MarkLocation.Top:return{x:d,y:s.height()-i,direction:"down"};case o.MarkLocation.Bottom:return{x:d,y:i,direction:"up"};case o.MarkLocation.AbsoluteDown:return{x:d,y:s.priceToCoordinate(Object(n.ensureDefined)(r),a),direction:"down"};case o.MarkLocation.AbsoluteUp:return{x:d,y:s.priceToCoordinate(Object(n.ensureDefined)(r),a),direction:"up"};case o.MarkLocation.AboveBar:return{x:d,y:this._locationToY(t,e),direction:"down"};case o.MarkLocation.BelowBar:default:return{x:d,y:this._locationToY(t,e),direction:"up"}}},e.prototype._calcCoordsForRectangleShape=function(t,e,i,r,a,s){var l=Math.round(s.indexToCoordinate(e));switch(t){case o.MarkLocation.AbsoluteDown:case o.MarkLocation.AbsoluteUp:case o.MarkLocation.Absolute:return{x:l,y:a.priceToCoordinate(Object(n.ensureDefined)(i),r)};case o.MarkLocation.AboveBar:case o.MarkLocation.BelowBar:return{x:l,y:this._locationToY(t,e)};case o.MarkLocation.Right:case o.MarkLocation.Left:return{x:s.width(),y:a.priceToCoordinate(Object(n.ensureDefined)(i),r)};default:return{x:l,y:this._locationToY(t,e)}}},e}(y.a)},"3zbQ":function(t,e,i){"use strict";i.r(e),i.d(e,"LevelPaneView",(function(){return c}));var r=i("Eyy1"),n=i("aO4+"),a=i("VdBB"),o=i("VSsv"),s=i("Zy3/"),l=i("l4sv"),d=i("qgcf"),h=i("zDbI"),c=function(){function t(t,e,i){this._data=[],this._textData=[],this._invalidated=!0,this._provider=t,this._model=e}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new s.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e],n=new l.HorizontalLineRenderer;n.setData(r),t.append(n)}for(var o=0,h=this._textData;o<h.length;o++){var c=h[o];t.append(new d.TextRenderer(c,new a.HitTestResult(a.HitTestResult.REGULAR)))}return t},t.prototype._updateViewInternal=function(){this._calcHorzLinesData(),this._calcTextData()},t.prototype._calcTextData=function(){var t=this;this._textData=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var a=this._provider.graphics().hlines();if(0!==a.size){var s=this._provider.firstValue();null!==s&&a.forEach((function(a,l){var d=t._provider.properties().graphics.hlines[l];d.enableText.value()&&d.showText.value()&&a.forEach((function(a){var l=e.priceToCoordinate(Object(r.ensureDefined)(a.level),s),c=d.textPos.value(),u=function(t,e){if(t===o.a.TopLeft||t===o.a.MiddleLeft||t===o.a.BottomLeft)return["left",4]
;if(t===o.a.TopCenter||t===o.a.MiddleCenter||t===o.a.BottomCenter)return["center",e/2];if(t===o.a.TopRight||t===o.a.MiddleRight||t===o.a.BottomRight)return["right",e];throw new Error("Unsupported TextPos value")}(c,i.width()),p=u[0],f=u[1],v=function(t,e){if(t===o.a.TopLeft||t===o.a.TopCenter||t===o.a.TopRight)return["bottom",e-4];if(t===o.a.MiddleLeft||t===o.a.MiddleCenter||t===o.a.MiddleRight)return["middle",e-2];if(t===o.a.BottomLeft||t===o.a.BottomCenter||t===o.a.BottomRight)return["top",e];throw new Error("Unsupported TextPos value")}(c,l),_=v[0],y=v[1];t._textData.push({points:[new n.Point(f,y)],offsetX:0,offsetY:0,text:a.text||"",color:d.color.value(),font:h.CHART_FONT_FAMILY,fontsize:d.fontSize.value(),horzAlign:p,vertAlign:_})}))}))}}},t.prototype._calcHorzLinesData=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var n=this._provider.graphics().hlines();if(0!==n.size){var a=this._provider.firstValue();null!==a&&n.forEach((function(i,n){var o=t._provider.properties().graphics.hlines[n];o.visible.value()&&i.forEach((function(i){var n=e.priceToCoordinate(Object(r.ensureDefined)(i.level),a);t._data.push({visible:!0,y:n,color:o.color.value(),linewidth:o.width.value(),linestyle:o.style.value()})}))}))}}},t}()},BJvp:function(t,e,i){"use strict";i.r(e),i.d(e,"PolygonPaneView",(function(){return d}));var r=i("Eyy1"),n=i("aO4+"),a=i("VdBB"),o=i("Zy3/"),s=i("8Uy/"),l=i("BCbF"),d=function(){function t(t,e,i){this._data=[],this._invalidated=!0,this._provider=t,this._model=e,this._hitTestResult=void 0!==i?new a.HitTestResult(a.HitTestResult.CUSTOM,i):new a.HitTestResult(a.HitTestResult.REGULAR)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new o.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e],n=new l.PolygonRenderer(this._hitTestResult);n.setData(r),t.append(n)}return t},t.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var a=this._provider.graphics().polygons();if(0!==a.size){var o=this._model.timeScale().visibleBarsStrictRange();if(null!==o){var l=this._provider.firstValue();if(null!==l){var d=o.firstBar(),h=o.lastBar();a.forEach((function(a,o){var c=t._provider.properties().graphics.polygons[o];100!==c.transparency.value()&&a.forEach((function(a){for(var o=1/0,u=-1/0,p=0,f=a.points;p<f.length;p++){var v=f[p],_=v.index+(v.offset||0);o=Math.min(o,_),u=Math.max(u,_)}if(!(u<d||h<o)){var y=a.points.map((function(t){var a=i.indexToCoordinate(t.index+(t.offset||0)),o=e.priceToCoordinate(Object(r.ensureDefined)(t.level),l);return new n.Point(a,o)}));t._data.push({points:y,color:c.color.value(),backcolor:c.color.value(),linewidth:void 0!==c.showBorder&&c.showBorder.value()?1:0,linestyle:s.LINESTYLE_SOLID,filled:!0,fillBackground:!0,transparency:c.transparency.value(),
mouseTouchable:c.mouseTouchable.value()})}}))}))}}}}},t}()},Gj0v:function(t,e,i){"use strict";i.r(e);var r=i("Eyy1"),n=i("aO4+"),a=i("eJTA"),o=i("nEwK"),s=i("VdBB"),l=i("KG+6"),d=i("Zy3/"),h=i("qgcf"),c=function(){function t(t){this._data=t}return t.prototype.hitTest=function(t){var e=this._data.histsBySession;for(var i in e)if(e.hasOwnProperty(i)){var r=i.split(" ").map(parseFloat),n=r[0],a=r[1];if(t.x>=n&&t.x<=a){for(var o=0,l=e[i];o<l.length;o++){var d=l[o];if((t.y>=d.y1&&t.y<=d.y2||t.y>=d.y2&&t.y<=d.y1)&&t.x>=d.x1&&t.x<=d.x2)return new s.HitTestResult(s.HitTestResult.REGULAR)}return null}}return null},t.prototype.draw=function(t,e){var i=this._data;t.save(),i.histsByColor.forEach((function(i,r){t.fillStyle=r,t.beginPath();for(var n=0,a=i;n<a.length;n++){var o=a[n],s=Math.round(o.x1*e.pixelRatio),l=Math.round(o.x2*e.pixelRatio),d=Math.round(o.y1*e.pixelRatio),h=Math.round(o.y2*e.pixelRatio),c=l-s,u=Math.max(h-d,1);t.rect(s,d,c,u)}t.fill()})),t.restore()},t}(),u=i("Tmoa"),p=i("zDbI");i.d(e,"HHistPaneView",(function(){return f}));var f=function(){function t(t,e,i){this._invalidated=!0,this._provider=t,this._model=e,this._rendererData={histsByColor:new Map,histsBySession:{}},this._textData=[],this._styles={},this._hhistRenderer=new c(this._rendererData)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);var t=new d.CompositeRenderer;t.append(this._hhistRenderer);for(var e=0,i=this._textData;e<i.length;e++){var r=i[e];t.append(new h.TextRenderer(r,new s.HitTestResult(s.HitTestResult.REGULAR)))}return t},t.prototype._resetRenderersData=function(){this._rendererData.histsByColor=new Map,this._rendererData.histsBySession={},this._textData=[]},t.prototype._prepareStyles=function(){for(var t=Object.keys(Object(r.ensureDefined)(this._provider.graphicsInfo().hhists)),e=this._provider.properties().graphics.hhists,i=0,n=t;i<n.length;i++){var a=n[i],o=Object(r.ensureDefined)(e.child(a)),s=Object(u.generateColor)(o.colors[0].value(),o.transparencies[0].value()),l=o.colors[1]?Object(u.generateColor)(o.colors[1].value(),o.transparencies[1].value()):s;this._styles[a]={colors:[s,l],visible:o.visible.value(),percentWidth:o.percentWidth.value(),location:o.location.value(),direction:o.direction.value(),showValues:o.showValues.value(),valuesColor:o.valuesColor.value()}}},t.prototype._updateViewInternal=function(){var t=this;this._resetRenderersData();var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()&&null!==this._provider.firstValue()){var n=this._provider.graphics().hhistsByTimePointIndex();if(0!==n.size){var a=this._model.timeScale().visibleBarsStrictRange();if(null!==a){var o=a.firstBar(),s=a.lastBar();this._prepareStyles(),Object(r.ensureDefined)(n).forEach((function(r,n){var a=1/0,l=-1/0;r.forEach((function(t){a=Math.min(a,t.firstBarTime),l=Math.max(l,t.lastBarTime)})),l<o||a>s||t._updateDataForRenderers(r,e,i)}))}}}},t.prototype._updateDataForRenderers=function(t,e,i){
var o=this,s=[],l=e.height(),d=this._rendererData.histsByColor,h=this._rendererData.histsBySession;if(!(t.size<=0)){var c=null;if(t.forEach((function(t){c=c||t})),null!==c){var u=c,f=0;t.forEach((function(t){var e=t.rate.reduce((function(t,e){return t+e}));f=Math.max(f,e),t.priceLow<u.priceLow&&(u=t)}));var v=_(g(c,i)),x=Number.MAX_SAFE_INTEGER,T=[];if(t.forEach((function(t){var a=o._styles[t.styleId];if(a.visible){if(null==t.rate[t.rate.length-1]&&t.rate.splice(-1,1),a.showValues)for(var c=0;c<t.rate.length;c++)s[c]=(s[c]||0)+t.rate[c];var u=y(t,e,i,a,Object(r.ensureNotNull)(o._provider.firstValue())),g=u.xBasePoint,m=u.sign,b=u.yRange;if(!(b.min>l||b.max<0)){var R=b.min,S=b.max,P=Math.max(a.percentWidth*v/100-t.rate.length,0),O=t.rate.reduce((function(t,e){return t+e})),C=(m>0?g:g-P)+" "+(m>0?g+P:g),L=m>0?{x1:g,x2:g+P*O/f,y1:R,y2:S}:{x1:g-P*O/f,x2:g,y1:R,y2:S},B=h[C];B?B.push(L):h[C]=[L];for(c=0;c<t.rate.length;c++){var M={x1:0,y1:0,x2:0,y2:0};if(M.y1=R,M.y2=S,M.x1=0===c?g:g+m*(P*t.rate[c-1]/f),M.x2=M.x1+m*(P*t.rate[c]/f),!(Math.abs(M.x2-M.x1)<.5)){var E=a.colors[c],A=d.get(E);void 0===A?d.set(E,[M]):A.push(M)}}if(a.showValues){var H=o._formatRate(t.rate,a.direction),z=w(u,a,H),I=z.fontSize,D=z.textHAligh;x=Math.min(x,I);var V=g+3*m,j=b.max-.5*_(b),k={text:H,color:a.valuesColor,font:p.CHART_FONT_FAMILY,horzAlign:D,vertAlign:"middle",points:[new n.Point(V,j)],offsetX:0,offsetY:0,forceTextAlign:!0};T.push(k)}}}})),T.length>0){var m=this._styles[u.styleId],b=y(u,e,i,m,Object(r.ensureNotNull)(this._provider.firstValue())),R=b.xBasePoint,S=b.sign,P=b.yRange,O=this._formatRate(s,m.direction),C=w(b,m,O),L=C.fontSize,B=C.textHAligh;x=Math.min(x,L);var M=R+3*S,E=P.max+.5*_(P),A={text:O,color:Object(a.shiftColor)(m.valuesColor,1.5),font:p.CHART_FONT_FAMILY,horzAlign:B,vertAlign:"middle",points:[new n.Point(M,E)],offsetX:0,offsetY:0,forceTextAlign:!0};T.push(A)}if(x>=7.5)for(var H=0,z=T;H<z.length;H++){var I=z[H];I.fontsize=x,this._textData.push(I)}}}},t.prototype._formatRate=function(t,e){e===l.a.RightToLeft&&(t=t.slice()).reverse();var i=new o.VolumeFormatter;return t.map((function(t){return i.format(t)})).join("x")},t}();function v(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function _(t){return t.max-t.min}function y(t,e,i,r,n){var a,o,s=r.location===l.b.Absolute,d=r.location===l.b.Relative,h=r.direction===l.a.LeftToRight,c=r.direction===l.a.RightToLeft,u=g(t,i);if(s&&h)a=u.min,o=1;else if(s&&c)a=u.max,o=-1;else if(d&&h)a=0,o=1;else{if(!d||!c)throw new Error("Unknown location/direction values: "+r.location+"/"+r.direction);a=i.width(),o=-1}var p=function(t,e,i){return v(e.priceToCoordinate(t.priceHigh,i),e.priceToCoordinate(t.priceLow,i))}(t,e,n),f=_(p)>=2?1:0;return{xBasePoint:a,sign:o,xRange:u,yRange:v(p.min,p.max-f)}}function w(t,e,i){var r,n=e.location===l.b.Absolute,a=e.location===l.b.Relative,o=e.direction===l.a.LeftToRight,s=e.direction===l.a.RightToLeft;if(n&&o)r="left";else if(n&&s)r="right";else if(a&&o)r="left";else{if(!a||!s)throw new Error("Unknown location/direction values: "+e.location+"/"+e.direction)
;r="right"}var d=_(t.xRange),h=_(t.yRange);return{fontSize:Math.min(Math.round(1.7*d/i.length),Math.round(.6*h)),textHAligh:r}}function g(t,e){return v(e.indexToCoordinate(t.firstBarTime,!0),e.indexToCoordinate(t.lastBarTime,!0))}},IMGS:function(t,e,i){"use strict";var r=i("aB9a").LineSourcePaneView,n=i("rvCT").LinearRegressionPaneView,a=i("NN6M").ParallelChannelRenderer,o=i("qgcf").TextRenderer,s=i("pJOz").TrendLineRenderer,l=i("vq8G").SelectionRenderer,d=i("VdBB").HitTestResult,h=i("Zy3/").CompositeRenderer,c=i("Tmoa");function u(t,e){r.call(this,t,e),this._calc=null,this._lines=[],this._pearsons=null,this._pearsonsLabelRenderer=new o,this._renderer=null}inherit(u,r),u.prototype.getTransparencyResetLines=function(){return this._lines.map((function(t){var e=$.extend({},t);return e.color=c.resetTransparency(e.color),e}))},u.prototype.renderer=function(t,e){return this._invalidated&&this._updateImpl(),this._renderer},u.prototype._updateImpl=function(){r.prototype._updateImpl.call(this),n.prototype._updateImpl.call(this),this._renderer=null;for(var t=new h,e=[],i=[this._lines[1],this._lines[0],this._lines[2]],o=[],u=0;u<i.length;u++)i[u]&&o.push(i[u]);for(u=1;u<o.length;u++){var p={};p.points=[i[u].floatPoints[0],i[u].floatPoints[1],i[u-1].floatPoints[0],i[u-1].floatPoints[1]],p.color=i[u].color,p.width=this._model.timeScale().width(),p.height=this._source.priceScale().height(),p.linewidth=i[u].linewidth,p.linestyle=i[u].linestyle,p.extendleft=!1,p.extendright=i[u].extendright,p.backcolor=p.color,p.transparency=this._source.properties().styles.transparency.value(),p.skipLines=!0,p.fillBackground=!0,(v=new a(new d(d.REGULAR))).setData(p),t.append(v)}var f=this.getTransparencyResetLines();for(u=0;u<o.length;u++){var v;(v=new s).setData(f[u]),v.setHitTest(new d(d.REGULAR)),t.append(v),0!==u&&(e=e.concat(this._lines[u].floatPoints))}if(this._pearsons&&(this._pearsons.color=c.resetTransparency(this._pearsons.color),this._pearsonsLabelRenderer.setData(this._pearsons),t.append(this._pearsonsLabelRenderer)),this._lines&&this._lines.length>=1){t.append(new l({points:e,bgColor:this._model.backgroundColor().value(),visible:this.areAnchorsVisible()}));var _=this._lines[0].floatPoints;_[0].data=0,_[1].data=1,t.append(this.createLineAnchor({points:_}))}this._renderer=t},e.RegressionTrendPaneView=u},IyRz:function(t,e,i){"use strict";i.r(e);var r=i("Eyy1"),n=i("Zy3/"),a=i("ikwP"),o=i("Tmoa"),s=function(){function t(t){this._data=t}return t.prototype.hitTest=function(t){return null},t.prototype.draw=function(t,e){},t.prototype.drawBackground=function(t,e){var i=this._data,r=Object(o.generateColor)(this._data.color,this._data.transparency),n=e.pixelRatio,s=Math.round(i.x1*n),l=Math.round(i.x2*n),d=Math.round(i.y1*n),h=Math.round(i.y2*n);Object(a.fillRect)(t,s,d,l-s,h-d,r)},t}();i.d(e,"BackgroundPaneView",(function(){return l}));var l=function(){function t(t,e,i){this._data=[],this._invalidated=!0,this._provider=t,this._model=e,this._data=[]}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){
this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new n.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e];t.append(new s(r))}return t},t.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var n=this._provider.graphics().backgrounds();if(0!==n.size){var a=this._model.timeScale().visibleBarsStrictRange();if(null!==a){var o=a.firstBar(),s=a.lastBar();n.forEach((function(n,a){var l,d,h=t._provider.properties().graphics.backgrounds[a];h.visible.value()&&n.forEach((function(n){var a=null!==n.start?n.start:Object(r.ensureNotNull)(i.points().firstIndex()),c=n.stop;if(!(c<o||s<a)){var u=i.indexToCoordinate(a,!0)-.5*i.barSpacing(),p=i.indexToCoordinate(c,!0)+.5*i.barSpacing();d===a-1&&(u=l||u),l=p,d=c,u<0&&p<0||u>i.width()&&p>i.width()||t._data.push({x1:u,x2:p,y1:0,y2:e.height(),color:h.color.value(),transparency:h.transparency.value()})}}))}))}}}},t}()},K3ps:function(t,e,i){"use strict";i.r(e);var r,n=i("Zy3/"),a=i("PF2b"),o=i("Kmdw"),s=i("akof"),l=i("+q2u"),d=i("fxzW"),h=i("P+Pi"),c=i("IOzl"),u=i("mrSG"),p=i("jlDR"),f=i("VdBB"),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(u.__extends)(e,t),e.prototype.hitTest=function(t){for(var e=t.x,i=t.y,r=0,n=this._items;r<n.length;r++){var a=n[r],o=a.x,s=a.x+a.shapeWidth,l=a.y-a.shapeHeight+a.vertOffset,d=a.y+a.vertOffset;if(e>o&&e<s&&i>l&&i<d)return new f.HitTestResult(f.HitTestResult.REGULAR)}return null},e.prototype._drawItemShape=function(t,e,i){var r=e.pixelRatio,n=this._lineWidth(e)%2?.5:0,a=this._getArrowSize(i),o=Math.round(i.x*r)+n,s=Math.round(i.y+i.vertOffset)+n,l=Math.round((i.x+a)*r)+n,d=Math.round((i.y+i.vertOffset-a)*r)+n,h=Math.round((i.y+i.vertOffset-2*a)*r)+n;t.moveTo(l,d),t.lineTo(o,s),t.lineTo(l,h);var c=Math.round((i.y+i.vertOffset-i.shapeHeight)*r)+n,u=Math.round(i.x*r+i.shapeWidth)+n;this._drawCorner(t,l,c,p.a.leftUp,r),this._drawCorner(t,u,c,p.a.rightUp,r),this._drawCorner(t,u,d,p.a.rightDown,r),t.lineTo(l,d)},e.prototype._getArrowSize=function(t){return t.stepX/Math.sqrt(2)},e.prototype._getHorizontalTextOffset=function(t){return t.shapeWidth/2+this._getArrowSize(t)/2},e.prototype._getVerticalTextOffset=function(t){return-t.shapeHeight/2-this._getArrowSize(t)/2},e}(p.b),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(u.__extends)(e,t),e.prototype.hitTest=function(t){for(var e=t.x,i=t.y,r=0,n=this._items;r<n.length;r++){var a=n[r],o=a.x,s=a.x+a.shapeWidth,l=a.y+a.vertOffset,d=a.y+a.shapeHeight+a.vertOffset;if(e>o&&e<s&&i>l&&i<d)return new f.HitTestResult(f.HitTestResult.REGULAR)}return null},e.prototype._drawItemShape=function(t,e,i){
var r=e.pixelRatio,n=this._lineWidth(e)%2?.5:0,a=this._getArrowSize(i),o=Math.round(i.x*r)+n,s=Math.round((i.y+i.vertOffset)*r)+n,l=Math.round((i.x+a)*r)+n,d=Math.round((i.y+i.vertOffset+2*a)*r)+n,h=Math.round((i.y+i.vertOffset+a)*r)+n,c=Math.round((i.x+i.shapeWidth)*r)+n,u=Math.round((i.y+i.vertOffset+i.shapeHeight)*r)+n;t.moveTo(l,d),t.lineTo(o,s),t.lineTo(l,h),this._drawCorner(t,c,h,p.a.rightUp,r),this._drawCorner(t,c,u,p.a.rightDown,r),this._drawCorner(t,l,u,p.a.leftDown,r),t.lineTo(l,d)},e.prototype._getArrowSize=function(t){return t.stepX/Math.sqrt(2)},e.prototype._getHorizontalTextOffset=function(t){return t.shapeWidth/2+this._getArrowSize(t)/2},e.prototype._getVerticalTextOffset=function(t){return t.shapeHeight/2+this._getArrowSize(t)/2},e}(p.b),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(u.__extends)(e,t),e.prototype.hitTest=function(t){for(var e=t.x,i=t.y,r=0,n=this._items;r<n.length;r++){var a=n[r],o=a.x-a.shapeWidth,s=a.x,l=a.y-a.shapeHeight+a.vertOffset,d=a.y+a.vertOffset;if(e>o&&e<s&&i>l&&i<d)return new f.HitTestResult(f.HitTestResult.REGULAR)}return null},e.prototype._drawItemShape=function(t,e,i){var r=e.pixelRatio,n=this._lineWidth(e)%2?.5:0,a=this._getArrowSize(i),o=Math.round(i.x*r)+n,s=Math.round((i.y+i.vertOffset)*r)+n,l=Math.round((i.x-a)*r)+n,d=Math.round((i.y+i.vertOffset-2*a)*r)+n,h=Math.round((i.y+i.vertOffset-a)*r)+n,c=Math.round((i.x-i.shapeWidth)*r)+n,u=Math.round((i.y+i.vertOffset-i.shapeHeight)*r)+n;t.moveTo(l,d),t.lineTo(o,s),t.lineTo(l,h),this._drawCorner(t,c,h,p.a.leftDown,r),this._drawCorner(t,c,u,p.a.leftUp,r),this._drawCorner(t,l,u,p.a.rightUp,r),t.lineTo(l,d)},e.prototype._getArrowSize=function(t){return t.stepX/Math.sqrt(2)},e.prototype._getVerticalTextOffset=function(t){return-t.shapeHeight/2-this._getArrowSize(t)/2},e.prototype._getHorizontalTextOffset=function(t){return-t.shapeWidth/2-this._getArrowSize(t)/2},e}(p.b),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(u.__extends)(e,t),e.prototype.hitTest=function(t){for(var e=t.x,i=t.y,r=0,n=this._items;r<n.length;r++){var a=n[r],o=a.x-a.shapeWidth,s=a.x,l=a.y+a.vertOffset,d=a.y+a.shapeHeight+a.vertOffset;if(e>o&&e<s&&i>l&&i<d)return new f.HitTestResult(f.HitTestResult.REGULAR)}return null},e.prototype._drawItemShape=function(t,e,i){var r=e.pixelRatio,n=this._lineWidth(e)%2?.5:0,a=this._getArrowSize(i),o=Math.round(i.x*r)+n,s=Math.round((i.y+i.vertOffset)*r)+n,l=Math.round((i.x-a)*r)+n,d=Math.round((i.y+i.vertOffset+a)*r)+n,h=Math.round((i.y+i.vertOffset+2*a)*r)+n,c=Math.round((i.x-i.shapeWidth)*r)+n,u=Math.round((i.y+i.vertOffset+i.shapeHeight)*r)+n;t.moveTo(l,d),t.lineTo(o,s),t.lineTo(l,h),this._drawCorner(t,l,u,p.a.rightDown,r),this._drawCorner(t,c,u,p.a.leftDown,r),this._drawCorner(t,c,d,p.a.leftUp,r),t.lineTo(l,d)},e.prototype._getArrowSize=function(t){return t.stepX/Math.sqrt(2)},e.prototype._getHorizontalTextOffset=function(t){return-t.shapeWidth/2-this._getArrowSize(t)/2},e.prototype._getVerticalTextOffset=function(t){
return t.shapeHeight/2+this._getArrowSize(t)/2},e}(p.b),g=i("6ptY"),x=i("V0al"),T=i("2WC2"),m=i("gBDZ"),b=i("aO4+"),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(u.__extends)(e,t),e.prototype.setData=function(t,e){this._setBaseData(t,e);for(var i=0,r=this._items;i<r.length;i++){var n=r[i];0===n.vertOffset&&(n.textVertOffset=0)}},e.prototype._drawItemText=function(t,e,i){var r,n=this._getTextCache(i);if(null!==n){var a=i.x,o=i.y+i.textVertOffset,s=(null===(r=i.style)||void 0===r?void 0:r.textColor)||this._textColor,l=i.vertOffset;n.paintTo(t,e,s,a,o,m.a.Center,l>0?m.c.Top:m.c.Bottom)}},e.prototype._calcBoundingBox=function(t){var e=t.vertOffset,i=this._getTextCache(t);if(i){var r=i.textImageWidth,n=i.textImageHeight,a=r/2,o=t.y+t.textVertOffset,s=e>0?0:-n,l=e>0?n:0,d=new b.Point(t.x-a,o+s),h=new b.Point(t.x+a,o+l);return Object(b.box)(d,h)}},e}(T.a),S=i("vaiT"),P=i("23IT"),O=i("tS10"),C=i("Eyy1");i.d(e,"DwgLabelPaneView",(function(){return M}));var L,B=((r={})[S.b.Left]="left",r[S.b.Center]="center",r[S.b.Right]="right",r);!function(t){t.NORMAL_SIZE=50,t.AUTO_SIZE_MULT=1,t.SHAPE_HEIGHT_MULT=.5,t.SHAPE_WIDTH_MULT=.6,t.FONT_SIZE_MULT=.24}(L||(L={}));var M=function(){function t(t,e,i){this._rendererTypeByStyle=new Map([[S.a.Arrowdown,o.PaneRendererArrowDown],[S.a.Arrowup,o.PaneRendererArrowUp],[S.a.Circle,s.PaneRendererCircleShape],[S.a.Cross,l.PaneRendererCrossShape],[S.a.Diamond,d.PaneRendererDiamond],[S.a.Flag,h.PaneRendererFlagShape],[S.a.LabelDown,c.PaneRendererLabelDown],[S.a.LabelUp,c.PaneRendererLabelUp],[S.a.LabelLeft,c.PaneRendererLabelLeft],[S.a.LabelRight,c.PaneRendererLabelRight],[S.a.LabelCenter,c.PaneRendererLabelCenter],[S.a.LabelLeftUp,_],[S.a.LabelLeftDown,v],[S.a.LabelRightUp,w],[S.a.LabelRightDown,y],[S.a.Square,g.PaneRendererSquare],[S.a.Triangleup,a.PaneRendererTriangleApexUp],[S.a.Triangledown,a.PaneRendererTriangleApexDown],[S.a.Xcross,x.PaneRendererXCross],[S.a.None,R]]),this._invalidated=!0,this._graphicsProvider=t,this._model=e,this._renderer=new n.CompositeRenderer,this._textCache=new O.a(5e3)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){return this._invalidated&&(this._invalidated=!1,this._updateViewInternal(this._model.timeScale().barSpacing())),this._renderer},t.prototype._updateViewInternal=function(t){var e=this;this._renderer.clear();var i=this._graphicsProvider.priceScale(),r=this._model.timeScale();if(i&&!i.isEmpty()&&!r.isEmpty()){var n=this._graphicsProvider.graphics().dwglabels(),a=r.visibleBarsStrictRange(),o=this._graphicsProvider.firstValue();if(0!==n.size&&null!==a&&null!==o){var s=a.firstBar(),l=a.lastBar(),d=Math.round(t*L.AUTO_SIZE_MULT),h=null,c=[];n.forEach((function(t,r){e._graphicsProvider.properties().graphics.dwglabels[r].visible.value()&&t.forEach((function(t){var r=t.x;if(!(r<s||l<r)){var n=e._graphicsProvider.metaInfo().defaults.palettes;if(void 0!==n&&void 0!==n.palette_common){
var a=n.palette_common,u=null===t.colorIndex?null:a.colors[t.colorIndex],p=null===t.textColorIndex?null:a.colors[t.textColorIndex];if(void 0!==u&&void 0!==p){var f=null===u?void 0:u.color,v=null===p?void 0:p.color;if(void 0!==f||void 0!==v){var _,y=t.size,w=t.style,g=e._calculateLabelHeight(L.NORMAL_SIZE,y,d),x=e._getInvertedYloc(t.yloc,i.isInverted()),T=void 0===v?"":t.text,m=B[t.textAlign],b=t.tooltip,R=e._getLocationData({index:r,price:t.y,yloc:x,size:g,style:w,firstValue:o,hideShape:void 0===f}),S={x:R.x0,y:R.y0,width:R.shapeWidth,height:R.shapeHeight,vertOffset:R.vertOffset,text:T,fontSize:R.fontSize,style:{color:f,borderColor:f,textColor:v},textAlign:m,tooltip:b};R.style!==h?(_={items:[],style:R.style},c.push(_),h=R.style):_=c[c.length-1],_.items.push(S)}}}}}))})),c.forEach((function(i){var r=new(Object(C.ensureDefined)(e._rendererTypeByStyle.get(i.style)))({items:i.items,barSpacing:t},{textCache:e._textCache,skipRenderingOptimizations:!0});e._renderer.append(r)}))}}},t.prototype._getLocationData=function(t){var e=L,i=t.size*e.FONT_SIZE_MULT,r=this._model.timeScale(),n=this._graphicsProvider.priceScale(),a=r.indexToCoordinate(t.index,!0),o=NaN;if(t.yloc===S.c.Price)o=n.priceToCoordinate(t.price,t.firstValue);else{var s=t.yloc===S.c.AboveBar?2:3,l=this._graphicsProvider.series().bars().valueAt(t.index);if(null!==l){var d=l[s];null!=d&&(o=n.priceToCoordinate(d,t.firstValue))}}var h=t.size*e.SHAPE_WIDTH_MULT,c=t.size*e.SHAPE_HEIGHT_MULT;return{x0:a,y0:o,shapeWidth:h,shapeHeight:c,vertOffset:-1.5*c*this._getYLocSign(t.yloc),fontSize:i,style:t.hideShape?S.a.None:t.style}},t.prototype._getYLocSign=function(t){return t===S.c.Price?0:t===S.c.AboveBar?1:-1},t.prototype._getInvertedYloc=function(t,e){if(e){if(t===S.c.AboveBar)return S.c.BelowBar;if(t===S.c.BelowBar)return S.c.AboveBar}return t},t.prototype._calculateLabelHeight=function(t,e,i){var r=i;switch(e){case P.PlotSymbolSize.Tiny:r=.6*t;break;case P.PlotSymbolSize.Small:r=.8*t;break;case P.PlotSymbolSize.Normal:r=t;break;case P.PlotSymbolSize.Large:r=1.5*t;break;case P.PlotSymbolSize.Huge:r=2*t}return r},t}()},Kt0C:function(t,e,i){"use strict";i.r(e),i.d(e,"LinePaneView",(function(){return d}));var r=i("Eyy1"),n=i("aO4+"),a=i("VdBB"),o=i("Zy3/"),s=i("a7Ha"),l=i("pJOz"),d=function(){function t(t,e,i){this._data=[],this._invalidated=!0,this._provider=t,this._model=e,this._hitTestResult=void 0!==i?new a.HitTestResult(a.HitTestResult.CUSTOM,i):new a.HitTestResult(a.HitTestResult.REGULAR)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new o.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e],n=new l.TrendLineRenderer;n.setData(r),n.setHitTest(this._hitTestResult),t.append(n)}return t},t.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var a=this._provider.graphics().lines();if(0!==a.size){
var o=this._model.timeScale().visibleBarsStrictRange();if(null!==o){var l=this._provider.firstValue();if(null!==l){var d=o.firstBar(),h=o.lastBar();a.forEach((function(a,o){var c=t._provider.properties().graphics.lines[o];c.visible.value()&&a.forEach((function(a){var o=a.startIndex+(a.startOffset||0),u=a.endIndex+(a.endOffset||0);if(!(Math.max(o,u)<d||Math.min(o,u)>h)){var p=i.indexToCoordinate(o),f=i.indexToCoordinate(u),v=e.priceToCoordinate(Object(r.ensureDefined)(a.startPrice),l),_=e.priceToCoordinate(Object(r.ensureDefined)(a.endPrice),l),y=new n.Point(p,v),w=new n.Point(f,_);t._data.push({points:[y,w],extendleft:!1,extendright:!1,leftend:s.LineEnd.Normal,rightend:s.LineEnd.Normal,color:c.color.value(),linewidth:c.width.value(),linestyle:c.style.value()})}}))}))}}}}},t}()},PztT:function(t,e,i){"use strict";i.r(e);var r=i("mrSG"),n=i("aO4+"),a=i("tSCe"),o=i.n(a),s=i("2tp3"),l=i("GEp6"),d=i("VdBB"),h=i("jFln"),c=i("Zp/P"),u=i("ikwP");function p(t){return t*this.width}var f=function(){function t(t){this._locs=t}return t.prototype.draw=function(t,e){var i=this;t.lineCap="butt",Object(u.drawScaled)(t,e.pixelRatio,(function(){i._locs.forEach((function(e){var r=e.style,n=r.type.dashPattern.map(p,r);t.strokeStyle=r.color,t.lineWidth=r.width,Object(h.setLineDash)(t,n),t.beginPath(),i._drawShape(t,e),t.stroke()}))}))},t.prototype.hitTest=function(t){for(var e=0,i=this._locs;e<i.length;e++){var r=i[e],n=r.style.width/2;if(Object(l.distanceToSegment)(r.extP1,r.extP2,t).distance<=n)return new d.HitTestResult(d.HitTestResult.REGULAR)}return null},t.prototype._drawShape=function(t,e){t.moveTo(e.extP1.x,e.extP1.y),t.lineTo(e.extP2.x,e.extP2.y);var i=e.style.width;e.style.type.drawLeftArrow&&this._drawArrow(t,e.p2,e.p1,i),e.style.type.drawRightArrow&&this._drawArrow(t,e.p1,e.p2,i)},t.prototype._drawArrow=function(t,e,i,r){if(!(i.subtract(e).length()<1))for(var n=0,a=Object(c.getArrowPoints)(e,i,r,!0);n<a.length;n++){var o=a[n];t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y)}},t}(),v=i("hBTJ");function _(t,e,i){var r=function(t,e,i){var r=e.subtract(t);return i.subtract(t).dotProduct(r)/r.dotProduct(r)}(t.extP1,t.extP2,e),n=t.extP1.add(t.extP2.subtract(t.extP1).scaled(r));r<0&&i.left?t.extP1=n:r>1&&i.right&&(t.extP2=n)}i.d(e,"DwgLinePaneView",(function(){return y}));var y=function(t){function e(e,i,r){var n=t.call(this)||this;return n._invalidated=!0,n._graphicsProvider=e,n._model=i,n._renderer=null,n}return Object(r.__extends)(e,t),e.prototype.update=function(){this._invalidated=!0},e.prototype.renderer=function(){return this._invalidated&&(this._renderer=null,this._invalidated=!1,this._updateRenderer()),this._renderer},e.prototype._updateRenderer=function(){var t=this,e=this._graphicsProvider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var r=this._graphicsProvider.graphics().dwglines();if(0!==r.size)if(null!==this._model.timeScale().visibleBarsStrictRange()){var a=this._graphicsProvider.metaInfo().defaults.palettes;if(void 0!==a&&void 0!==a.palette_common){
var o=a.palette_common,l=this._graphicsProvider.firstValue();if(null!==l){var d=i.width(),h=e.height(),c=[];r.forEach((function(r,a){t._graphicsProvider.properties().graphics.dwglines[a].visible.value()&&r.forEach((function(r){if(null!==r.colorIndex){var a=o.colors[r.colorIndex];if(void 0!==a){var u=i.indexToCoordinate(r.x1,!0),p=e.priceToCoordinate(r.y1,l),f=i.indexToCoordinate(r.x2,!0),v=e.priceToCoordinate(r.y2,l),_={width:r.width>0?r.width:1,color:a.color,type:Object(s.c)(r.style)},y=t._getLocationData(new n.Point(u,p),new n.Point(f,v),r.extend,d,h,_);null!==y&&c.push(y)}}}))})),this._renderer=new f(c)}}}}},e.prototype._getLocationData=function(t,e,i,r,a,o){var l=function(t){return{left:t===s.a.Both||t===s.a.Left,right:t===s.a.Both||t===s.a.Right}}(i),d={p1:t,p2:e,extP1:t,extP2:e,style:o};l.left&&!l.right&&(d.extP1=e,d.extP2=t,l.left=!1,l.right=!0);var h=[new n.Point(0,0),new n.Point(0,a),new n.Point(r,a),new n.Point(r,0)];!function(t,e,i){for(var r=0,n=e;r<n.length;r++){_(t,n[r],i)}}(d,h,l);var c=function(t,e,i){var r=.5*i,n=e.subtract(t).normalized().transposed().scaled(r),a=t.add(n),o=e.add(n),s=t.subtract(n);return[a,o,e.subtract(n),s]}(d.extP1,d.extP2,o.width);return null===Object(v.intersectPolygons)(h,c)?null:d},e}(o.a)},cPgM:function(t,e,i){"use strict";i.r(e),i.d(e,"ScaledPaneRenderer",(function(){return n})),i.d(e,"ScaledPaneRendererWrapper",(function(){return a}));var r=i("mrSG"),n=function(){function t(){}return t.prototype.draw=function(t,e){t.save(),t.scale(e.pixelRatio,e.pixelRatio),t.translate(.5,.5),this._drawImpl(t,Object(r.__assign)(Object(r.__assign)({},e),{pixelRatio:1})),t.restore()},t.prototype.drawBackground=function(t,e){t.save(),t.scale(e.pixelRatio,e.pixelRatio),t.translate(.5,.5),this._drawBackgroundImpl(t,Object(r.__assign)(Object(r.__assign)({},e),{pixelRatio:1})),t.restore()},t.prototype._drawBackgroundImpl=function(t,e){},t}(),a=function(){function t(t){this._base=t}return t.prototype.hitTest=function(t,e){return this._base.hitTest(t,e)},t.prototype.draw=function(t,e){t.save(),t.scale(e.pixelRatio,e.pixelRatio),t.translate(.5,.5),this._base.draw(t,Object(r.__assign)(Object(r.__assign)({},e),{pixelRatio:1})),t.restore()},t.prototype.drawBackground=function(t,e){t.save(),t.scale(e.pixelRatio,e.pixelRatio),t.translate(.5,.5),this._base.drawBackground&&this._base.drawBackground(t,Object(r.__assign)(Object(r.__assign)({},e),{pixelRatio:1})),t.restore()},t}()},nEwK:function(t,e,i){"use strict";i.r(e),i.d(e,"PLACE_HOLDER",(function(){return o})),i.d(e,"VolumeFormatter",(function(){return s}));var r=i("zXvd"),n=i("ogJP"),a=i("ivNn"),o=(i("YFKU"),"---"),s=function(){function t(t){this.type="volume",this._numericFormatter=new r.NumericFormatter,this._fractionalValues=void 0!==t&&t>0,this._precision=t}return t.prototype.state=function(){return{precision:this._precision}},t.prototype.format=function(t){if(!Object(n.isNumber)(t))return o;var e="";return t<0&&(e="-",t=-t),
t>=1e100?window.t("N/A"):(!this._fractionalValues||t>=995?t=Math.round(t):this._fractionalValues&&(t=+t.toFixed(this._precision)),t<995?e+this._formatNumber(t):t<999995?e+this._formatNumber(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this._formatNumber(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this._formatNumber(t/1e9)+"B"))},t.prototype.parse=function(t){if("---"===t)return{error:"not a number",res:!1,value:NaN};var e={K:1e3,M:1e6,B:1e9},i=t.slice(-1);if(e.hasOwnProperty(i)){var r=this._numericFormatter.parse(t.slice(0,-1));return Object(n.isNumber)(r)?{res:!0,value:r*e[i]}:{error:"not a number",res:!1,value:NaN}}r=this._numericFormatter.parse(t);return Object(n.isNumber)(r)?{res:!0,value:r}:{error:"not a number",res:!1,value:NaN}},t.serialize=function(t){return t.state()},t.deserialize=function(e){return new t(e.precision)},t.prototype._formatNumber=function(t){return this._fractionalValues&&(t=Object(a.fixComputationError)(t)),this._numericFormatter.format(t).replace(/(\.[1-9]*)0+$/,(function(t,e){return e}))},t}()},psYU:function(t,e,i){"use strict";i.r(e),i.d(e,"VertLinePaneView",(function(){return l}));var r=i("Eyy1"),n=i("VdBB"),a=i("972a"),o=i("Zy3/"),s=i("z+cS"),l=function(){function t(t,e,i){this._data=[],this._invalidated=!0,this._provider=t,this._model=e,this._hitTestResult=void 0!==i?new n.HitTestResult(n.HitTestResult.CUSTOM,i):new n.HitTestResult(n.HitTestResult.REGULAR)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new o.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e],n=new s.VerticalLineRenderer;n.setData(r),n.setHitTest(this._hitTestResult),t.append(n)}return t},t.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var n=this._provider.graphicsInfo().vertlines,o=this._provider.graphics().vertlines();if(0!==o.size&&void 0!==n){var s=this._model.timeScale().visibleBarsStrictRange();if(null!==s){var l=this._provider.firstValue();if(null!==l){var d=s.firstBar(),h=s.lastBar();o.forEach((function(o,s){var c=t._provider.properties().graphics.vertlines[s];if(c.visible.value()){var u=0;switch(Object(r.ensureDefined)(n[s]).halign){case a.HAlign.Left:u=-i.barSpacing()/2;break;case a.HAlign.Right:u=i.barSpacing()/2}o.forEach((function(n){var a=n.index;a<d||h<a||t._data.push({x:i.indexToCoordinate(a)+u,top:n.extendTop?void 0:e.priceToCoordinate(Object(r.ensureDefined)(n.endPrice),l),bottom:n.extendBottom?void 0:e.priceToCoordinate(Object(r.ensureDefined)(n.startPrice),l),color:c.color.value(),linewidth:c.width.value(),linestyle:c.style.value()})}))}}))}}}}},t}()},qVqd:function(t,e,i){"use strict";i.r(e);var r=i("mrSG"),n=i("Eyy1"),a=i("aO4+"),o=i("972a"),s=i("Zy3/"),l=i("f6yo"),d=i("VdBB"),h=i("ikwP"),c=function(){function t(t){this._data=t}return t.prototype.draw=function(t,e){
var i=this,r="down"===this._data.direction?1:"up"===this._data.direction?-1:0,n=this._data.point.x,a=this._data.point.y;Object(h.drawScaled)(t,e.pixelRatio,(function(){t.fillStyle=i._data.color,t.beginPath(),t.arc(n+1,a+2*i._data.size*r,i._data.size,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()}))},t.prototype.hitTest=function(t){var e="down"===this._data.direction?1:"up"===this._data.direction?-1:0,i=new a.Point(this._data.point.x+.5,this._data.point.y+.5+2*this._data.size*e);return Object(l.pointInCircle)(t,i,this._data.size)?new d.HitTestResult(d.HitTestResult.REGULAR):null},t}(),u=function(){function t(t){this._data=t}return t.prototype.draw=function(t,e){var i="down"===this._data.direction?1:"up"===this._data.direction?-1:0,r=this._data.size,n=new a.Point(this._data.point.x-r/2,this._data.point.y-r/2+i*r),o=new a.Point(this._data.point.x+r/2,this._data.point.y+r/2+i*r).subtract(n),s=e.pixelRatio,l=Math.max(1,Math.floor(s)),d=l/2,h=l%2?.5:0,c=Math.round(n.x*s)+h,u=Math.round((n.x+o.x)*s)+h,p=Math.round(n.y*s)+h,f=Math.round((n.y+o.y)*s)+h;t.beginPath(),t.fillStyle=this._data.color,t.rect(c+d,p+d,u-c-l,f-p-l),t.fill(),t.lineWidth=l,t.beginPath(),t.rect(c,p,u-c,f-p),t.stroke()},t.prototype.hitTest=function(t){var e="down"===this._data.direction?1:"up"===this._data.direction?-1:0,i=this._data.size,r=new a.Point(this._data.point.x-i/2,this._data.point.y-i/2+e*i),n=new a.Point(this._data.point.x+i/2,this._data.point.y+i/2+e*i);return Object(l.pointInBox)(t,Object(a.box)(r,n))?new d.HitTestResult(d.HitTestResult.REGULAR):null},t}(),p=function(){function t(t,e){this._data=t,this._arrowDirection=e}return t.prototype.draw=function(t,e){var i=this._arrowDirection,r=this._data.size,n=this._data.color,a=this._data.point.x+1,o=this._data.point.y,s=1.1*r;switch(i){case"up":o-=s;break;case"down":o+=s}var l=r/6,d=r/4,c=r/3,u=r/2,p=.6666666*r;Object(h.drawScaled)(t,e.pixelRatio,(function(){switch(t.fillStyle=n,t.beginPath(),i){case"up":t.moveTo(a,o),t.lineTo(a-u,o+p),t.lineTo(a-d,o+p),t.lineTo(a,o+c),t.lineTo(a+d,o+p),t.lineTo(a+u,o+p),t.lineTo(a,o);break;case"down":t.moveTo(a,o+r),t.lineTo(a-u,o+c),t.lineTo(a-d,o+c),t.lineTo(a,o+p),t.lineTo(a+d,o+c),t.lineTo(a+u,o+c),t.lineTo(a,o+r);break;case"right":t.moveTo(a+l,o),t.lineTo(a-l,o-d),t.lineTo(a-l,o+d),t.lineTo(a+l,o);break;case"left":t.moveTo(a-l,o),t.lineTo(a+l,o-d),t.lineTo(a+l,o+d),t.lineTo(a-l,o)}t.closePath(),t.fill(),t.stroke()}))},t.prototype.hitTest=function(t){var e=this._hitTriangle(),i=e[0],r=e[1],n=e[2];return Object(l.pointInTriangle)(t,i,r,n)?new d.HitTestResult(d.HitTestResult.REGULAR):null},t.prototype._hitTriangle=function(){var t=this._data.point.x,e=this._data.point.y,i=this._arrowDirection,r=this._data.size,n=1.1*r;switch(i){case"up":e-=n;break;case"down":e+=n}var o=r/6,s=r/4,l=r/3,d=r/2,h=.6666666*r;switch(i){case"up":return[new a.Point(t,e),new a.Point(t+d,e+h),new a.Point(t-d,e+h)];case"down":return[new a.Point(t,e+r),new a.Point(t+d,e+l),new a.Point(t-d,e+l)];case"right":return[new a.Point(t+o,e),new a.Point(t-o,e-s),new a.Point(t-o,e+s)];case"left":
return[new a.Point(t-o,e),new a.Point(t+o,e-s),new a.Point(t+o,e+s)]}},t}(),f=i("tSCe"),v=i.n(f),_=i("Tmoa"),y=i("uOxu");i.d(e,"ShapeMarkPaneView",(function(){return g}));var w=Object(y.getLogger)("Chart.ShapeMarkPaneView"),g=function(t){function e(e,i,r){var n=t.call(this)||this;return n._data=[],n._invalidated=!0,n._provider=e,n._model=i,n._data=[],n}return Object(r.__extends)(e,t),e.prototype.update=function(){this._invalidated=!0},e.prototype.renderer=function(){this._invalidated&&(this._updateViewInternal(),this._invalidated=!1);for(var t=new s.CompositeRenderer,e=0,i=this._data;e<i.length;e++){var r=i[e];switch(r.shape){case"circle":t.append(new c(r));break;case"square":t.append(new u(r));break;case"arrowUp":t.append(new p(r,"up"));break;case"arrowDown":t.append(new p(r,"down"));break;case"arrowRight":t.append(new p(r,"right"));break;case"arrowLeft":t.append(new p(r,"left"))}}return t},e.prototype._updateViewInternal=function(){var t=this;this._data=[];var e=this._provider.priceScale(),i=this._model.timeScale();if(e&&!e.isEmpty()&&!i.isEmpty()){var r=this._provider.graphics().shapemarks();if(0!==r.size){var n=this._model.timeScale().visibleBarsStrictRange();if(null!==n){var o=this._provider.firstValue();if(null!==o){var s=n.firstBar(),l=n.lastBar();r.forEach((function(r,n){var d=t._provider.properties().graphics.shapemarks[n];d.visible.value()&&r.forEach((function(r){var n=r.time;if(!(n<s||l<n)&&null!==t._provider.series().bars().valueAt(n)){var h="left"===d.halign.value()?-(i.barSpacing()/2+1):"right"===d.halign.value()?i.barSpacing()/2+1:0,c=d.location.value(),u=d.shape.value(),p=parseInt(d.size.value()),f=Object(_.generateColor)(d.color.value(),d.transparency.value()),v=t._calcCoordsForShape(c,n,p,r.price,o,e,i),y=v.x,w=v.y,g=v.direction;switch(u){case"circle":case"square":t._data.push({shape:u,color:f,direction:g,point:new a.Point(y+h,w),size:p});break;case"arrowUp":case"arrowDown":case"arrowRight":case"arrowLeft":t._data.push({shape:u,color:f,point:new a.Point(y+h,w),size:p})}}}))}))}}}}},e.prototype._calcCoordsForShape=function(t,e,i,r,a,s,l){var d=Math.round(l.indexToCoordinate(e));switch(t){case o.MarkLocation.Absolute:return{x:d,y:s.priceToCoordinate(Object(n.ensureDefined)(r),a),direction:""};case o.MarkLocation.AbsoluteDown:return{x:d,y:s.priceToCoordinate(Object(n.ensureDefined)(r),a),direction:"down"};case o.MarkLocation.AbsoluteUp:return{x:d,y:s.priceToCoordinate(Object(n.ensureDefined)(r),a),direction:"up"};case o.MarkLocation.AboveBar:return{x:d,y:this._locationToY(t,e,Math.floor(2*i/l.barSpacing())+1),direction:"up"};case o.MarkLocation.BelowBar:return{x:d,y:this._locationToY(t,e,Math.floor(2*i/l.barSpacing())+1),direction:"down"};default:return w.logWarn("Bad location value: "+t),{x:d,y:this._locationToY(o.MarkLocation.AbsoluteUp,e),direction:"up"}}},e}(v.a)},rvCT:function(t,e,i){"use strict";i.r(e),i.d(e,"LinearRegressionPaneView",(function(){return f}))
;var r=i("mrSG"),n=i("Eyy1"),a=i("aO4+"),o=i("VdBB"),s=i("Tmoa"),l=i("Zy3/"),d=i("NN6M"),h=i("pJOz"),c=i("qgcf"),u=i("a7Ha"),p=i("zDbI"),f=function(){function t(t,e){this._invalidated=!0,this._lines=[],this._pearsonsTextRenderer=new c.TextRenderer,this._pearsons=null,this._model=t,this._source=e}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);for(var t=new l.CompositeRenderer,e=[this._lines[1],this._lines[0],this._lines[2]],i=[],n=0,a=e;n<a.length;n++){var c=a[n];c&&i.push(c)}for(var u=1;u<i.length;u++){var p={points:[e[u].floatPoints[0],e[u].floatPoints[1],e[u-1].floatPoints[0],e[u-1].floatPoints[1]],color:e[u].color,linewidth:e[u].linewidth,linestyle:e[u].linestyle,extendleft:!1,extendright:e[u].extendright,backcolor:e[u].color,transparency:this._source.properties().styles.transparency.value(),skipLines:!0,fillBackground:!0,showMidline:!1};(_=new d.ParallelChannelRenderer(new o.HitTestResult(o.HitTestResult.REGULAR),new o.HitTestResult(o.HitTestResult.REGULAR))).setData(p),t.append(_)}for(var f=0,v=function(t){return t.map((function(t){var e=Object(r.__assign)({},t);return e.color=Object(s.resetTransparency)(e.color),e}))}(this._lines);f<v.length;f++){var _,y=v[f];(_=new h.TrendLineRenderer).setData(y),_.setHitTest(new o.HitTestResult(o.HitTestResult.REGULAR)),t.append(_)}return this._pearsons&&(this._pearsons.color=Object(s.resetTransparency)(this._pearsons.color),this._pearsonsTextRenderer.setData(this._pearsons),t.append(this._pearsonsTextRenderer)),t},t.prototype._updateImpl=function(){if(this._lines=[],this._pearsons=null,this._source.properties().visible.value()){var t=this._model.timeScale(),e=this._source.priceScale(),i=this._model.mainSeries().firstBar();if(e&&!e.isEmpty()&&!t.isEmpty()&&i){var r=this._source.startIndex(),o=this._source.endIndex();if(null!==r&&null!==o){for(var s=[this._source.baseLine(),this._source.downLine(),this._source.upLine()],l=Math.round(t.indexToCoordinate(r)),d=Math.round(t.indexToCoordinate(o)),h=this._source.properties(),c=[h.styles.baseLine,h.styles.downLine,h.styles.upLine],f=i[TradingView.CLOSE_PLOT],v=0;v<s.length;v++)if(c[v].visible.value()){var _=Object(n.ensureNotNull)(s[v]).startPrice,y=Object(n.ensureNotNull)(s[v]).endPrice;if(void 0!==_&&void 0!==y){var w=e.priceToCoordinate(_,f),g=e.priceToCoordinate(y,f),x=new a.Point(l,w),T=new a.Point(d,g),m=c[v].color.value(),b=c[v].linewidth.value(),R=c[v].linestyle.value(),S={floatPoints:[x,T],width:this._model.timeScale().width(),height:Object(n.ensureNotNull)(this._source.priceScale()).height(),color:m,linewidth:b,linestyle:R,extendleft:!1,extendright:h.styles.extendLines.value(),leftend:u.LineEnd.Normal,rightend:u.LineEnd.Normal};this._lines.push(S)}}var P=Object(n.ensureNotNull)(this._source.downLine());if(h.styles.showPearsons.value()&&void 0!==P.startPrice){var O=e.priceToCoordinate(P.startPrice,f),C=new a.Point(l,O);this._pearsons={points:[C],text:""+this._source.pearsons(),color:h.styles.downLine.color.value(),
vertAlign:"top",horzAlign:"center",font:p.CHART_FONT_FAMILY,offsetX:0,offsetY:4,fontsize:12}}}}}},t}()},tSCe:function(t,e,i){"use strict";var r=i("Hr11"),n=r.min,a=r.max,o=i("972a").MarkLocation;function s(){}s.prototype._locationToY=function(t,e,i){i||(i=0);var r,s=[],l=this._provider.priceScale();switch(t){case o.AboveBar:r=TradingView.HIGH_PLOT;break;case o.BelowBar:r=TradingView.LOW_PLOT}var d=this._provider.firstValue();i>=1&&(i-=1);for(var h=-i;h<=i;h++){var c=this._provider.series().bars().valueAt(e+h);if(null!==c){var u=c[r];s.push(l.priceToCoordinate(u,d))}}switch(t){case o.AboveBar:return n(s)-15;case o.BelowBar:return a(s)+15}},t.exports=s},zXvd:function(t,e,i){"use strict";i.r(e),i.d(e,"NumericFormatter",(function(){return n}));var r=i("kcTO"),n=function(){function t(t){this._precision=t}return t.prototype.format=function(e){return(void 0!==this._precision?e.toFixed(this._precision):t.formatNoE(e)).replace(".",r.formatterOptions.decimalSign)},t.prototype.parse=function(t){var e=t.replace(r.formatterOptions.decimalSign,"."),i=parseFloat(e);return this._precision&&(i=+i.toFixed(this._precision)),i},t.formatNoE=function(t){return t>=1e-15&&t<1?t.toFixed(15).replace(/\.?0+$/,""):String(t)},t}()}}]);